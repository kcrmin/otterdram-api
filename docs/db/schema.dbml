// OtterDram DB Schema
// version: 3.1.1
// last updated: 2025-08-17
// author: kcrmin

// ======================= ENUMS (ìƒìˆ˜ íƒ€ì…) =======================
// 1. Common
Enum DataStatus {
  // DRAFT       // ì´ˆê¸° ìƒì„± ìƒíƒœ (ë¹„ë…¸ì¶œ)
  IN_REVIEW   // ë¦¬ë¹„ì „ ì§„í–‰ ì¤‘ ìƒíƒœ (ë…¸ì¶œ ê°€ëŠ¥í•˜ë‚˜ ìµœì‹  ì•„ë‹˜)
  CONFIRMED   // ë¦¬ë¹„ì „ ì™„ë£Œ ìƒíƒœ (ì •ìƒ ë…¸ì¶œ)
  SUPPRESSED  // ì‹ ê³  ë“±ìœ¼ë¡œ ìˆ¨ê¹€ ì²˜ë¦¬ëœ ìƒíƒœ (ë¹„ë…¸ì¶œ)
}
Enum LanguageCode {
    EN
    BR
    DE
    ES
    FA
    FR
    HR
    IT
    JA
    KO
    NL
    PL
    PT
    PT_BR
    RU
    TR
    UK
    ZH_CN
}
Enum Privacy {
  PUBLIC            // ì „ì²´ ê³µê°œ (ëˆ„êµ¬ë‚˜ ì ‘ê·¼ ê°€ëŠ¥)
  FOLLOWERS_ONLY    // íŒ”ë¡œì›Œì—ê²Œë§Œ ê³µê°œ (ë¡œê·¸ì¸ í•„ìš”)
  MEMBERS_ONLY      // ë©¤ë²„ ì „ìš© ê³µê°œ (ê·¸ë£¹/ì»¤ë®¤ë‹ˆí‹° ì†Œì†ìë§Œ ì ‘ê·¼ ê°€ëŠ¥)
  PRIVATE           // ë¹„ê³µê°œ (ì‘ì„±ì ë³¸ì¸ë§Œ ì ‘ê·¼ ê°€ëŠ¥)
}
Enum RevisionStatus {
  // DRAFT      // ì´ˆê¸° ìƒì„± ìƒíƒœ (ì„ì‹œ ì €ì¥)
  IN_REVIEW     // ê²€í†  ìš”ì²­ë¨ (ì œì¶œ ì™„ë£Œ)
  APPROVED      // ìŠ¹ì¸ ì™„ë£Œ ìƒíƒœ (ë©”ì¸ ë°˜ì˜ ëŒ€ìƒ)
  REJECTED      // ë°˜ë ¤ë¨ (ë¹„ë…¸ì¶œ)
}

// 2. Spirits
Enum AgeStatementType {
  AGE_STATED  // ìˆ™ì„± ì—°ìˆ˜ ëª…ì‹œ (ì˜ˆ: 12ë…„, 18ë…„ ë“±)
  NAS         // No Age Statement (ìˆ™ì„± ì—°ìˆ˜ ë¯¸í‘œê¸°)
  UNAGED      // ìˆ™ì„±ë˜ì§€ ì•Šì€ ì¦ë¥˜ì£¼ (ì˜ˆ: í™”ì´íŠ¸ ëŸ¼, ì§„, ë³´ë“œì¹´ ë“±)
  UNKNOWN     // ì•Œ ìˆ˜ ì—†ìŒ (ì˜ˆ: ì •ë³´ ë¶€ì¡±, ë¯¸í™•ì¸ ë“±)
}
Enum BottlingFormatType {
  SINGLE_CASK   // ë‹¨ì¼ ìºìŠ¤í¬ì—ì„œ ë³‘ì… (Single Barrelê³¼ ë™ì¼ ì˜ë¯¸)
  SMALL_BATCH   // ì†Œê·œëª¨ ìºìŠ¤í¬ ë¸”ë Œë”©, ì œí•œëœ ìˆ˜ëŸ‰ ìƒì‚°
  STANDARD      // ëŒ€ëŸ‰ ìƒì‚°ì„ ìœ„í•œ ì¼ë°˜ì ì¸ ë³‘ì… ë°©ì‹
  UNKNOWN       // ë³‘ì… ë°©ì‹ì— ëŒ€í•œ ì •ë³´ ì—†ìŒ
}
Enum BottlingStrengthType {
  CASK_STRENGTH   // ë¬¼ í¬ì„ ì—†ì´ ë³‘ì… (Barrel Proofì™€ ë™ì¼)
  FULL_PROOF      // ìºìŠ¤í¬ì— ë„£ì„ ë•Œì˜ ë„ìˆ˜ë¡œ í¬ì„í•´ ë³‘ì…
  OVERPROOF       // ì¼ë°˜ì ì¸ ì œí’ˆë³´ë‹¤ ë†’ì€ ë„ìˆ˜ë¡œ ë³‘ì…
  STANDARD        // ì¼ë°˜ì ì¸ í¬ì„ ë³‘ì… ë°©ì‹
  UNDERPROOF      // ì¼ë°˜ì ì¸ ê¸°ì¤€ë³´ë‹¤ ë‚®ì€ ë„ìˆ˜ë¡œ ë³‘ì…
}
Enum DistilleryOperationalStatus {
  ACTIVE                // ì •ìƒ ìš´ì˜ ì¤‘
  INACTIVE              // ì¼ì‹œ ë¹„ê°€ë™(ì¼ì‹œ ì¤‘ë‹¨, íœ´ì—…)
  CLOSED                // ì™„ì „ íì‡„(ë¬¸ ë‹«ìŒ)
  DEMOLISHED            // ì² ê±°ë¨(ê±´ë¬¼/ì‹œì„¤ ì‚¬ë¼ì§)
  UNDER_CONSTRUCTION    // ê±´ì„¤ ì¤‘(ë¯¸ì™„ê³µ)
  PLANNED               // ì„¤ë¦½ ì˜ˆì •(ê³„íšë§Œ ìˆìŒ)
  MOTHBALLED            // ì¥ê¸° ë¹„ê°€ë™(ì‹œì„¤ ìœ ì§€/ì¬ê°œ ê°€ëŠ¥)
  RENOVATION            // ë¦¬ë…¸ë² ì´ì…˜(ê³µì‚¬/ê°œì¡° ì¤‘)
  UNKNOWN               // ì •ë³´ ì—†ìŒ/ë¶ˆë¶„ëª…
}
Enum FillNumber {
  UNKNOWN       // ì •ë³´ ì—†ìŒ
  VIRGIN        // ìƒˆ ìºìŠ¤í¬
  FIRST_FILL    // ì²« ë²ˆì§¸ ì¬ì‚¬ìš©
  SECOND_FILL   // ë‘ ë²ˆì§¸ ì¬ì‚¬ìš©
  THIRD_FILL    // ì„¸ ë²ˆì§¸ ì¬ì‚¬ìš©
  REFILL        // ë¦¬í•„ ìºìŠ¤í¬ (ì •í™•í•œ íšŸìˆ˜ ë¶ˆëª…)
}
Enum PeatLevel {
  NONE        // No peat influence
  LIGHT       // Subtle peat/smoke influence
  MEDIUM      // Balanced or moderate peat influence
  HEAVY       // Strong peat influence
  EXTREME     // Very strong or overwhelming peat influence
  UNKNOWN     // Unknown peat level
}

// 3. Target
Enum CommentTargetEntity {
  BRAND
  COLLECTION
  MODEL
}
Enum RevisionTargetEntity {
  COMPANY
  DISTILLERY
  BRAND
  COLLECTION
  MODEL
  RELEASE
  CASK
  CASK_MATERIAL
  CASK_TYPE
}
Enum TagTargetEntity {
  COMPANY
  DISTILLERY
  BRAND
  COLLECTION
  MODEL
  RELEASE
}

// 4. UGC (User Generated Content)
Enum AlcoholPresence {
  NONE
  LOW
  MEDIUM
  HIGH
  VERY_HIGH
}
Enum AuthMethod {
  QR_CODE
  NFC
  CODE
}
Enum Balance {
  UNBALANCED
  SLIGHTLY_UNBALANCED
  BALANCED
  MODERATELY_BALANCED
  WELL_BALANCED
}
Enum BodyIntensity {
  LIGHT
  MEDIUM
  FULL
  OILY
  CREAMY
}
Enum Complexity {
  LOW
  MEDIUM
  HIGH
}
Enum FinishLength {
  VERY_SHORT
  SHORT
  MEDIUM
  LONG
  VERY_LONG
  EXTRA_LONG
}
Enum ServingStyle {
  NEAT
  ON_THE_ROCKS
  WITH_WATER
  HIGHBALL
  OTHER
}
Enum Tier {
  UNACCEPTABLE      // 50 - 59
  BELOW_AVERAGE     // 60 - 69
  AVERAGE           // 70 - 79
  DECENT            // 80 - 89
  OUTSTANDING       // 90 - 95
  EXTRAORDINARY     // 96 - 100
}
Enum TransferStatus {
  ACTIVE
  CLAIMED
  EXPIRED
  REVOKED
}
Enum VolumeUnit {
  ML
  CL
  L
  OZ
  SHOT
  UNKNOWN
}
Enum VoteType {
  LIKE
  DISLIKE
}

// 5. User
Enum FollowStatus {
  APPROVED
  PENDING
  REJECTED
}
Enum Gender {
  MALE
  FEMALE
  RATHER_NOT_SAY
  UNSPECIFIED
  OTHER
}
Enum UserStatus {
  ACTIVE        // ì •ìƒ í™œë™ ì¤‘ì¸ ê³„ì •
  SUSPENDED     // ì„ì‹œ ì •ì§€ëœ ê³„ì • (ê´€ë¦¬ì ë˜ëŠ” ì‹œìŠ¤í…œì— ì˜í•´ ì œí•œë¨)
  BANNED        // ì˜êµ¬ ì •ì§€ëœ ê³„ì • (ìœ„ë°˜ ë“±ìœ¼ë¡œ ê°•ì œ ì°¨ë‹¨ë¨)
  DEACTIVATED   // ì‚¬ìš©ìê°€ ì§ì ‘ ë¹„í™œì„±í™”í•œ ê³„ì • (ì¬í™œì„±í™” ê°€ëŠ¥)
  DELETED       // ì™„ì „íˆ ì‚­ì œëœ ê³„ì • (ë³µêµ¬ ë¶ˆê°€))
}

// === USER DATA ===

// -- ì‚¬ìš©ì ì •ë³´ --
Table users {
  id id [pk, increment]
  username varchar(50) [not null, unique, note: "@username"]
  email varchar(255) [not null, unique, note: "ì¸ì¦ëœ ì´ë©”ì¼ë§Œ"]
  profile_image varchar(255)
  verified boolean [not null, default: false, note: "ì¸ì¦ëœ ì¸í”Œë£¨ì–¸ì„œ/ì „ë¬¸ê°€"]
  user_privacy Privacy [not null, default: 'PUBLIC']
  user_status UserStatus [not null, default: 'ACTIVE']
  last_login_at timestamptz(6) [not null]
  created_at timestamptz(6) [not null]
  updated_at timestamptz(6) [not null]
  deleted_at timestamptz(6)
}
Table user_profiles {
  id bigint [pk, increment]
  user_id bigint [ref: - users.id, unique, not null]
  display_name varchar(100) [not null]
  bio text
  country_id bigint [ref: > countries.id]
  city_id bigint [ref: > cities.id]
  address varchar(255)
  birthday date [not null]
  gender Gender [not null, default: 'UNSPECIFIED']
  created_at timestamptz(6) [not null]
  updated_at timestamptz(6) [not null]
}
Table user_social_accounts {
  id bigint [pk, increment]
  user_id bigint [not null, ref: > users.id]
  provider varchar(50) [not null]
  provider_id varchar(255) [not null]
  created_at timestamptz(6) [not null]
  indexes {
    (provider, provider_id) [unique]
  }
}
Table user_settings {
  id bigint [pk, increment]
  user_id bigint [ref: - users.id, not null, unique]
  // marketing_opt_in boolean [not null, default: false, note: "ë§ˆì¼€íŒ… ìˆ˜ì‹  ë™ì˜ ì—¬ë¶€"]
  // marketing_opt_at timestamptz(6) [not null, note: "ë§ˆì¼€íŒ… ìˆ˜ì‹  ë™ì˜ ì‹œê°(ìµœì´ˆ ë™ì˜/ì² íšŒ ë³€ê²½ ì‹œë§ˆë‹¤ ê°±ì‹ )"]
  terms_version_agreed varchar(50) [not null, note: "ì•½ê´€ë²„ì „. ì˜ˆ: '2024.06'"]
  // notification_opt_in boolean [not null, default: false, note: "ì´ë©”ì¼/ì•± ì•Œë¦¼ ì „ì²´ ë™ì˜ ì—¬ë¶€"]
  // push_opt_in boolean [not null, default: false, note: "ì•± í‘¸ì‹œ ì•Œë¦¼ ë™ì˜ ì—¬ë¶€"]
  lang_preference LanguageCode [not null, default: 'en']
  created_at timestamptz(6) [not null]
  updated_at timestamptz(6) [not null]
}
Table user_roles {
  id bigint [pk, increment]
  user_id bigint [ref: > users.id, not null]
  role_id bigint [ref: > roles.id, not null]
  created_at timestamptz(6) [not null, note: "ROLE_USER: created_at, ROLE_ADMIN: assigned_at"]
  created_by bigint [ref: > users.id, not null, note: "ROLE_USER: created_by, ROLE_ADMIN: assigned_by"]
  indexes {
    (user_id, role_id) [unique]
  }
}
Table roles {
  id bigint [pk, increment]
  role_name varchar(50) [unique, not null, note: "ROLE_REVIEWER, ROLE_EDITOR, ROLE_ADMIN, ROLE_USER"]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
}
Table user_follows {
  id bigint [pk, increment]
  follower_id bigint [ref: > users.id, not null]
  followee_id bigint [ref: > users.id, not null]
  status FollowStatus [not null, default: `APPROVED`]
  created_at timestamptz(6) [not null]
}
Table user_blocks {
  id bigint [pk, increment]
  blocker_id bigint [ref: > users.id, not null]
  blocked_id bigint [ref: > users.id, not null]
  created_at timestamptz(6) [not null]
}


// === REPORT ===

// -- ì‹ ê³  / ë¦¬í¬íŠ¸ --
Table user_reports {
  id bigint [pk, increment]
  reporter_id bigint [ref: > users.id, not null]
  reported_user_id bigint [ref: > users.id, not null]
  language_code LanguageCode [not null]
  report_reason varchar(100) [not null, note: "ì˜ˆ: 'ìš•ì„¤', 'ìŠ¤íŒ¸' ë“±"]
  report_description text
  reported_at timestamptz(6) [not null]
  status ReportStatus [not null, default: 'PENDING']
}
Table content_reports {
  id bigint [pk, increment]
  reporter_id bigint [ref: > users.id, not null]
  target_type ReportTargetType [not null]
  target_id bigint [not null]
  language_code LanguageCode [not null]
  report_reason varchar(100) [not null]
  report_description text
  reported_at timestamptz(6) [not null]
  status ReportStatus [not null, default: 'PENDING']
}


// === USER-GENERATED CONTENT (UGC) ===

// -- ì„ ë°˜ --
Table shelves {
  id bigint [pk, increment]
  owner_id bigint [not null, ref: > users.id]
  privacy Privacy [not null, default: 'PUBLIC']
  shelf_name varchar(100) [not null]
  created_at timestamptz(6) [not null]
  updated_at timestamptz(6) [not null]
  deleted_at timestamptz(6)
}
Table shelf_share_tokens {
  id bigint [pk, increment]
  shelf_id bigint [not null, ref: > shelves.id]
  claim_type AuthMethod [not null]
  claim_token varchar(100) [not null, unique]
  status TokenStatus [default: 'ACTIVE']
  created_at timestamptz(6) [not null]
  updated_at timestamptz(6) [not null]
}

// -- ì„ ë°˜ ë³‘ --
Table bottles {
  id bigint [pk, increment]
  shelf_id bigint [ref: > shelves.id, not null]
  release_id bigint [ref: > releases.id, not null]
  note varchar(255)
  residual_volume smallint
  residual_volume_unit VolumeUnit [default: 'ML', not null]
  bottle_size smallint
  bottle_size_unit VolumeUnit [default: 'ML', not null]
  acquired_at timestamptz(6)
  opened boolean [not null, default: false]
  first_opened_at timestamptz(6)
  last_opened_at timestamptz(6)
  completed boolean [not null, default: false]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table bottle_transfers {
  id bigint [pk, increment]
  bottle_id bigint [ref: > bottles.id, not null]
  status TokenStatus [not null, default: 'ACTIVE']
  transfered_at timestamptz(6)
  transfered_by bigint [ref: > users.id, note: "claimëœ ì´í›„ ì…ë ¥"]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
}
Table bottle_transfer_tokens {
  id bigint [pk, increment]
  bottle_transfer_id bigint [not null, ref: > bottle_transfers.id]
  claim_type AuthMethod [not null]
  claim_token varchar(100) [not null, unique]
  expires_at timestamptz(6) [not null]

  indexes {
    (bottle_transfer_id, claim_type) [unique]
  }
}

// -- ì„ ë°˜ ë°”ì´ì•Œ --
Table vials {
  id bigint [pk, increment]
  shelf_id bigint [ref: > shelves.id, not null]
  release_id bigint [ref: > releases.id, not null]
  vial_name varchar(100) [not null]
  is_blind boolean [not null, default: false]
  note varchar(255)
  vial_size smallint
  vial_size_unit VolumeUnit [default: 'ML', not null]
  acquired_at timestamptz(6)
  breathed_for interval [note: "ì²« ê°œë´‰ í›„ ì§€ë‚œ ì‹œê°„ (last_opened_at - first_opened_at)"]
  completed boolean [not null, default: false]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table vial_transfers {
  id bigint [pk, increment]
  vial_id bigint [ref: > vials.id, not null]
  status TokenStatus [not null, default: 'ACTIVE']
  transfered_at timestamptz(6)
  transfered_by bigint [ref: > users.id, note: "claimëœ ì´í›„ ì…ë ¥"]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
}
Table vial_transfer_tokens {
  id bigint [pk, increment]
  vial_transfer_id bigint [not null, ref: > vial_transfers.id]
  claim_type AuthMethod [not null]
  claim_token varchar(100) [not null, unique]
  expires_at timestamptz(6) [not null]

  indexes {
    (vial_transfer_id, claim_type) [unique]
  }
}

// -- ë¦¬ë·° --
Table reviews {
  review_id bigint [pk, increment]
  release_id bigint [ref: > releases.id, not null]
  vial_id bigint [ref: > vials.id]
  privacy Privacy [not null, default: 'PUBLIC']
  language_code LanguageCode [not null]
  blind_tasting boolean [not null, default: false]
  serving_style ServingStyle [not null]
  serving_size smallint [not null]
  serving_size_unit VolumeUnit [not null, default: 'UNKNOWN']
  breathed_for varchar [note: "ì²« ê°œë´‰ í›„ ì§€ë‚œ ì‹œê°„ (last_opened_at - first_opened_at)"]
  tier Tier [not null]
  score decimal(4, 1)
  alcohol_presence AlcoholPresence [not null]
  complexity Complexity [not null]
  body_intensity BodyIntensity [not null]
  finish_length FinishLength [not null]
  balance Balance [not null]
  overall_description text [note: "ì¢…í•© í‰ê°€"]
  nose_description text [note: "í–¥"]
  palate_description text [note: "ë§›"]
  finish_description text [note: "í”¼ë‹ˆì‹œ"]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  modified_at timestamptz(6)
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}

// -- ëŒ“ê¸€ & íˆ¬í‘œ --
Table entity_comments {
  id bigint [pk, increment]
  entity_type CommentTargetType [not null]
  entity_id bigint [not null]
  parent_id bigint [ref: > entity_comments.id]
  depth smallint [not null, default: '0', note: "ì¹´í…Œê³ ë¦¬ ê¹Šì´ (ìµœëŒ€ 1), 0=ë£¨íŠ¸, 1=1ë‹¨ê³„"]
  language_code LanguageCode [not null, default: 'EN']
  comment text [not null]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  modified_at timestamptz(6)
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table comment_votes {
  id bigint [pk, increment]
  entity_comment_id bigint [ref: > entity_comments.id]
  vote_type VoteType [not null]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  indexes {
    (entity_comment_id, created_by) [unique]
  }
}


// === DOMAIN MASTER DATA ===

// -- ì¹´í…Œê³ ë¦¬ --
Table categories {
  id bigint [pk, increment]
  name varchar(100) [not null, note: "ì¹´í…Œê³ ë¦¬ëª…, ì˜ˆ: 'Single Malt', 'Bourbon', 'Blended'"]
  parent_id bigint [ref: > categories.id, default: null]
  depth smallint [not null, note: "ì¹´í…Œê³ ë¦¬ ê¹Šì´, ë£¨íŠ¸=0, ì˜ˆ: 1=1ë‹¨ê³„, 2=2ë‹¨ê³„"]
  path varchar(255) [not null, note: "materialized path, ì˜ˆ: '1/2/3'"]
  translations jsonb [note: "ë‹¤êµ­ì–´ JSON"]
  descriptions jsonb [note: "ë‹¤êµ­ì–´ JSON"]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}

// -- ìœ„ìŠ¤í‚¤ êµ¬ì¡°: íšŒì‚¬ â†’ ì¦ë¥˜ì†Œ â†’ ë¸Œëœë“œ â†’ ì»¬ë ‰ì…˜ â†’ ëª¨ë¸ â†’ ë¦´ë¦¬ì¦ˆ --
Table companies {
  id bigint [pk, increment]
  parent_company_id bigint [ref: > companies.id]
  company_logo varchar(255)
  company_name varchar(100) [not null, unique]
  translations jsonb [note: "ë‹¤êµ­ì–´ ì§€ì› ì´ë¦„"]
  descriptions jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  independent_bottler boolean [not null, default: false]
  status DataStatus [not null, default: 'IN_REVIEW']
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table distilleries {
  id bigint [pk, increment]
  company_id bigint [ref: > companies.id]
  distillery_logo varchar(255)
  distillery_name varchar(100) [not null, unique]
  translations jsonb [note: "ë‹¤êµ­ì–´ ì§€ì› ì´ë¦„"]
  descriptions jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  country_id bigint [ref: > countries.id]
  city_id bigint [ref: > cities.id]
  address varchar(255)
  operational_status DistilleryOperationalStatus [not null, default: 'UNKNOWN']
  status DataStatus [not null, default: 'IN_REVIEW']
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table distillery_brand_relations {
  id bigint [pk, increment]
  distillery_id bigint [ref: > distilleries.id, not null]
  brand_id bigint [ref: > brands.id, not null]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
}
Table brands {
  id bigint [pk, increment]
  company_id bigint [ref: > companies.id]
  brand_logo varchar(255)
  brand_name varchar(100) [not null, unique]
  translations jsonb [note: "ë‹¤êµ­ì–´ ì§€ì› ì´ë¦„"]
  descriptions jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  status DataStatus [not null, default: 'IN_REVIEW']
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table collections {
  id bigint [pk, increment]
  brand_id bigint [ref: > brands.id, not null]
  collection_name varchar(100) [not null]
  translations jsonb [note: "ë‹¤êµ­ì–´ ì§€ì› ì´ë¦„"]
  descriptions jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  status DataStatus [not null, default: 'IN_REVIEW']
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table models {
  id bigint [pk, increment]
  collection_id bigint [ref: > collections.id, not null]
  category_id bigint [ref: > categories.id, note: "ì˜ˆ: ë²„ë²ˆ, ë¸”ëœë””ë“œ ë“±"]
  model_image varchar(255)
  model_name varchar(100) [not null]
  translations jsonb [note: "ë‹¤êµ­ì–´ ì§€ì› ì´ë¦„"]
  descriptions jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  status DataStatus [not null, default: 'IN_REVIEW']
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table release_distillery_relations {
  id bigint [pk, increment]
  release_id bigint [ref: > releases.id, not null]
  distillery_id bigint [ref: > distilleries.id, not null]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
}
Table releases {
  id bigint [pk, increment]
  model_id bigint [ref: > models.id, not null]
  release_image varchar(255)
  release_name varchar(100) [not null]
  translations jsonb [note: "ë‹¤êµ­ì–´ ì§€ì› ì´ë¦„"]
  descriptions jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  age_statement_type AgeStatementType [not null, default: 'UNKNOWN']
  stated_age smallint [note: "age_typeì´ 'STATED'ì¼ ë•Œë§Œ ê°’ì´ ìˆìŒ"]
  distilled_on date
  bottled_on date
  bottling_strength_type BottlingStrengthType [not null, default: 'STANDARD']
  abv decimal(5,2) [not null]
  limited_edition boolean [note: "í•œì •íŒ: NULLì€ UNKNOWN"]
  released_bottles varchar(32) [note: "ì´ ë°œë§¤ë³‘ìˆ˜(ì˜ˆ: '2000', 'â‰ˆ500' ë“±)"]
  bottling_format_type BottlingFormatType [not null, default: 'UNKNOWN']
  chill_filtered boolean [note: "NULLì€ UNKNOWN"]
  natural_color boolean [note: "NULLì€ UNKNOWN"]
  peat_level PeatLevel [not null, default: 'UNKNOWN']
  status DataStatus [not null, default: 'IN_REVIEW']
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}

// -- ìºìŠ¤í¬ (Casks) --
Table cask_materials {
  id bigint [pk, increment]
  name varchar(50) [not null, unique, note: "ì˜ˆ: American Oak, European Oak, Mizunara ë“±"]
  translations jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  descriptions jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  status DataStatus [not null, default: 'IN_REVIEW']
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table cask_types {
  id bigint [pk, increment]
  name varchar(50) [not null, unique, note: "ì˜ˆ: Barrel, Butt, Puncheon ë“±"]
  translations jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  descriptions jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  size_litre int [note: "ì˜ˆ: 200L, 500L ë“±"]
  status DataStatus [not null, default: 'IN_REVIEW']
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table casks {
  id bigint [pk, increment]
  name varchar(100) [not null, unique, note: "ì˜ˆ: PX Sherry Butt, Bourbon Barrel ë“±"]
  category_id bigint [ref: > categories.id, note: "ì˜ˆ: ë²„ë²ˆ, ì…°ë¦¬ì™€ì¸ ë“±"]
  material_id bigint [ref: > cask_materials.id]
  shape_id bigint [ref: > cask_types.id]
  translations jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  descriptions jsonb [note: "ë‹¤êµ­ì–´ ì§€ì›"]
  status DataStatus [not null, default: 'IN_REVIEW']
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  updated_at timestamptz(6) [not null]
  updated_by bigint [ref: > users.id, not null]
  deleted_at timestamptz(6)
  deleted_by bigint [ref: > users.id]
}
Table release_cask_relations {
  id bigint [pk, increment]
  release_id bigint [ref: > releases.id, not null]
  fill_number FillNumber [not null, default: 'UNKNOWN']
  cask_id bigint [ref: > casks.id, not null]
  proportion decimal(5,2) [note: "ë¹„ìœ¨(%)"]
  maturation_months smallint
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
}

// -- ë¦¬ë¹„ì „ (ìˆ˜ì • ì´ë ¥) --
Table entity_revisions {
  id bigint [pk, increment]
  entity_type RevisionEntityType [not null, note: "ìˆ˜ì • ëŒ€ìƒ ì—”í‹°í‹° ì¢…ë¥˜"]
  entity_id bigint [not null, note: "ìˆ˜ì • ëŒ€ìƒ ì—”í‹°í‹° ID"]
  schema_version varchar(16) [not null, default: '1.0']
  revision_data jsonb [not null]
  diff_data jsonb
  is_latest boolean [not null, default: true, note: "ìƒì„± ì‹œ ì´ì „ ë²„ì „ ê°’ falseë¡œ ë³€ê²½"]
  status RevisionStatus [not null, default: 'IN_REVIEW']
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
  reviewed_at timestamptz(6)
  reviewed_by bigint [ref: > users.id]

  // indexes {
  //   (entity_type, entity_id, is_latest = true) [unique]
  // }
}

// -- í‚¤ì›Œë“œ íƒœê¹… --
Table entity_tags {
  id bigint [pk, increment]
  entity_type TagEntityType [not null, note: "íƒœê·¸ ëŒ€ìƒ ì—”í‹°í‹° ì¢…ë¥˜"]
  entity_id bigint [not null, note: "íƒœê·¸ ëŒ€ìƒ ì—”í‹°í‹° ID"]
  language_code LanguageCode [not null]
  tag varchar(50) [not null]
  created_at timestamptz(6) [not null]
  created_by bigint [ref: > users.id, not null]
}


// === GEO DATA ===

// -- ì§€ì—­ ì •ë³´: ëŒ€ë¥™ â†’ í•˜ìœ„ ì§€ì—­ â†’ êµ­ê°€ â†’ ì£¼/ë„ â†’ ë„ì‹œ  --
Table regions {
  id bigint [pk, not null, increment]
  name varchar(100) [not null]
  translations text [note: "ë‹¤êµ­ì–´ JSON, ì˜ˆ: {'ko':'ìœ ëŸ½'}"]
  created_at timestamptz(6)
  updated_at timestamptz(6) [not null]
  flag smallint [not null, default: 1, note: "0=ë¹„í™œì„±, 1=í™œì„±"]
  "wikiDataId" varchar(255) [note: "ìœ„í‚¤ë°ì´í„° Që²ˆí˜¸, ì˜ˆ: 'Q46'"]
}
Table subregions {
  id bigint [pk, not null, increment]
  name varchar(100) [not null]
  translations text [note: "ë‹¤êµ­ì–´ JSON, ì˜ˆ: {'ko':'ì„œìœ ëŸ½'}"]
  region_id bigint [not null, ref: > regions.id]
  created_at timestamptz(6)
  updated_at timestamptz(6) [not null]
  flag smallint [not null, default: 1, note: "0=ë¹„í™œì„±, 1=í™œì„±"]
  "wikiDataId" varchar(255) [note: "ìœ„í‚¤ë°ì´í„° Që²ˆí˜¸, ì˜ˆ: 'Q990'"]
}
Table countries {
  id bigint [pk, not null, increment]
  name varchar(100) [not null, note: "ì˜ë¬¸ êµ­ê°€ëª…, ì˜ˆ: 'South Korea'"]
  iso3 char(3) [note: "ISO 3166-1 alpha-3, ì˜ˆ: 'KOR'"]
  numeric_code char(3) [note: "ISO 3166-1 numeric, ì˜ˆ: '410'"]
  iso2 char(2) [note: "ISO 3166-1 alpha-2, ì˜ˆ: 'KR'"]
  phonecode varchar(255) [note: "êµ­ì œì „í™”ì½”ë“œ, ì˜ˆ: '82'"]
  capital varchar(255) [note: "ìˆ˜ë„, ì˜ˆ: 'Seoul'"]
  currency varchar(255) [note: "í†µí™”ì½”ë“œ, ì˜ˆ: 'KRW'"]
  currency_name varchar(255) [note: "í†µí™”ëª…, ì˜ˆ: 'South Korean won'"]
  currency_symbol varchar(255) [note: "í†µí™”ê¸°í˜¸, ì˜ˆ: 'â‚©'"]
  tld varchar(255) [note: "ìµœìƒìœ„ ë„ë©”ì¸, ì˜ˆ: '.kr'"]
  native varchar(255) [note: "ìêµ­ì–´ êµ­ê°€ëª…, ì˜ˆ: 'ëŒ€í•œë¯¼êµ­'"]
  region varchar(255) [note: "ìƒìœ„ ì§€ì—­ëª…(ì˜ë¬¸), ì˜ˆ: 'Asia'"]
  region_id bigint [ref: > regions.id]
  subregion varchar(255) [note: "í•˜ìœ„ ì§€ì—­ëª…(ì˜ë¬¸), ì˜ˆ: 'Eastern Asia'"]
  subregion_id bigint [ref: > subregions.id]
  nationality varchar(255) [note: "êµ­ë¯¼ëª…, ì˜ˆ: 'Korean'"]
  timezones text [note: "JSON ë°°ì—´, ì˜ˆ: ['UTC+9']"]
  translations text [note: "ë‹¤êµ­ì–´ JSON, ì˜ˆ: {'ko':'ëŒ€í•œë¯¼êµ­'}"]
  latitude numeric(10,8)
  longitude numeric(11,8)
  emoji varchar(191) [note: "êµ­ê¸° ì´ëª¨ì§€, ì˜ˆ: 'ğŸ‡°ğŸ‡·'"]
  "emojiU" varchar(191) [note: "ìœ ë‹ˆì½”ë“œ, ì˜ˆ: 'U+1F1F0 U+1F1F7'"]
  created_at timestamptz(6)
  updated_at timestamptz(6) [not null]
  flag smallint [not null, default: 1, note: "0=ë¹„í™œì„±, 1=í™œì„±"]
  "wikiDataId" varchar(255) [note: "ìœ„í‚¤ë°ì´í„° Që²ˆí˜¸, ì˜ˆ: 'Q884'"]
}
Table states {
  id bigint [pk, not null, increment]
  name varchar(255) [not null, note: "ì£¼/ë„ ëª…ì¹­, ì˜ˆ: 'California', 'ì„œìš¸íŠ¹ë³„ì‹œ'"]
  country_id bigint [not null, ref: > countries.id]
  country_code char(2) [not null, note: "ISO êµ­ê°€ì½”ë“œ, ì˜ˆ: 'US', 'KR'"]
  fips_code varchar(255) [note: "ë¯¸êµ­ ë“± FIPS ì½”ë“œ, ì˜ˆ: 'CA'"]
  iso2 varchar(255) [note: "ISO 2ìë¦¬ ì£¼/ë„ ì½”ë“œ, ì˜ˆ: 'CA', '11'"]
  type varchar(191) [note: "í–‰ì •êµ¬ì—­ ì¢…ë¥˜, ì˜ˆ: 'State', 'Province', 'Special City'"]
  level integer [note: "í–‰ì • ë‹¨ê³„, ì˜ˆ: 1=ê´‘ì—­, 2=ì‹œ/êµ° ë“±"]
  parent_id integer
  latitude numeric(10,8)
  longitude numeric(11,8)
  created_at timestamptz(6)
  updated_at timestamptz(6) [not null]
  flag smallint [not null, default: 1, note: "0=ë¹„í™œì„±, 1=í™œì„±"]
  "wikiDataId" varchar(255) [note: "ìœ„í‚¤ë°ì´í„° Që²ˆí˜¸, ì˜ˆ: 'Q485705'"]
}
Table cities {
  id bigint [pk, not null, increment]
  name varchar(255) [not null, note: "ë„ì‹œëª…(ì˜ë¬¸), ì˜ˆ: 'Seoul', 'San Francisco'"]
  state_id bigint [not null, ref: > states.id]
  state_code varchar(255) [not null, note: "ì£¼/ë„ ì½”ë“œ, ì˜ˆ: 'CA', '11'"]
  country_id bigint [not null, ref: > countries.id]
  country_code char(2) [not null, note: "ISO êµ­ê°€ì½”ë“œ, ì˜ˆ: 'US', 'KR'"]
  latitude numeric(10,8) [not null]
  longitude numeric(11,8) [not null]
  created_at timestamptz(6) [not null, default: `'2014-01-01 12:01:01'`]
  updated_at timestamptz(6) [not null]
  flag smallint [not null, default: 1, note: "0=ë¹„í™œì„±, 1=í™œì„±"]
  "wikiDataId" varchar(255) [note: "ìœ„í‚¤ë°ì´í„° Që²ˆí˜¸, ì˜ˆ: 'Q8684'"]
}